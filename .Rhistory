learnr::run_tutorial("rintro", package="interactivepack")
install.packages("learnr")
install.packages("learnr")
learnr::run_tutorial("rintro", package="interactivepack")
devtools::install_github("ktmccabe/interactivepack", dependencies = T)
learnr::run_tutorial("rintro", package="interactivepack")
## Dummy variable example
resprace <- c("white", "white", "asian", "black", "hispanic",
"hispanic", "hispanic", "asian", "white", "black",
"black", "black", "asian", "asian", "white", "white")
## "Dummy variables"
white <- rep(0, length(resprace))
white[resprace == "white"] <- 1
asian <- rep(0, length(resprace))
asian[resprace == "asian"] <- 1
black <- rep(0, length(resprace))
black[resprace == "black"] <- 1
hispanic <- rep(0, length(resprace))
hispanic[resprace == "hispanic"] <- 1
## Matrix
X <- cbind(white, asian, black, hispanic)
## Dependent variable
Y <- cbind(c(10, 11, 9, 8, 9, 7, 7, 13, 12, 11, 8, 7, 4, 13, 8, 7))
X <- cbind(1, X)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
## Matrix
X[, 1] - X[, 2] - X[, 3] - X[, 4] - X[,5]
solve(t(X) %*% X)
resprace <- factor(resprace, levels = c("white", "asian", "black", "hispanic"))
summary(lm(Y ~ resprace))
age <- rep(18, length(resprace))
X <- cbind(1, asian, black, hispanic, age)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
florida <- read.csv("https://raw.githubusercontent.com/ktmccabe/teachingdata/main/florida.csv")
florida$perotadjusted <- florida$Perot96 * 1000
Y <- florida$Buchanan00
X <- cbind(1, florida$Perot96, florida$perotadjusted)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
X <- cbind(1, asian, black, hispanic)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
## Dummy variable example
resprace <- c("white", "white", "asian", "black", "hispanic",
"hispanic", "hispanic", "asian", "white", "black",
"black", "black", "asian", "asian", "white", "white")
## "Dummy variables"
white <- rep(0, length(resprace))
white[resprace == "white"] <- 1
asian <- rep(0, length(resprace))
asian[resprace == "asian"] <- 1
black <- rep(0, length(resprace))
black[resprace == "black"] <- 1
hispanic <- rep(0, length(resprace))
hispanic[resprace == "hispanic"] <- 1
## Matrix
X <- cbind(white, asian, black, hispanic)
X
## Dependent variable
Y <- cbind(c(10, 11, 9, 8, 9, 7, 7, 13, 12, 11, 8, 7, 4, 13, 8, 7))
X <- cbind(1, X)
X <- cbind(1, asian, black, hispanic)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
betahat
summary(lm(Y ~ asian + black + hispanic))
summary(lm(Y ~ white + asian + black + hispanic))
resprace <- factor(resprace, levels = c("white", "asian", "black", "hispanic"))
summary(lm(Y ~ resprace))
age <- rep(18, length(resprace))
X <- cbind(1, asian, black, hispanic, age)
betahat <- solve(t(X) %*% X) %*% t(X) %*% Y
getwd()
library(rmarkdown)
setwd("~/Dropbox/GitHub2/mle23")
ourlist <- c(1,2,3,4)
ourlist
ourlist <- c(1,2,3,4)
ourlist <- c(1,2,3,4)
knitr::opts_chunk$set(echo = TRUE)
ourlist <- c(1,2,3,4)
ourlist
ourlist <- c(1,2,3,4)
ourlist
(ourlist + 1)^2
sum((ourlist + 1)^2)
prod((ourlist + 1)^2)
q <-(ourlist + 1)^2
prod(q)
p <- ourlist + 1
q <-(p)^2
prod(q)
## Load Data
florida <- read.csv("https://raw.githubusercontent.com/ktmccabe/teachingdata/main/florida.csv")
florida
fit.1 <- lm(Buchanan00 ~ Perot96, data = florida)
ihater <- lm(Buchanan00 ~ Perot96, data = florida)
summary(ihater)
setwd("/Users/ktmccabe/Dropbox/Rutgers Teaching/data science for politics/fall2023")
install.packages("Zelig")
## Load Data
eb <- read.csv("Cong_Daught_2.csv")
setwd("~/Dropbox/Rutgers Teaching/MLE/fall23/assignments")
## Load Data
eb <- read.csv("Cong_Daught_2.csv")
eb$agesq <- eb$age^2 # Age Squared
eb$srvlngsq <- eb$srvlng^2 # Service Length Squared
## Transform Religious Groups into Dummy Variables
## Note: The author uses Group # 1 as Reference Category
eb$rel0 <- ifelse(eb$rgroup == 0, 1, 0)
eb$rel1 <- ifelse(eb$rgroup == 1, 1, 0)
eb$rel2 <- ifelse(eb$rgroup == 2, 1, 0)
eb$rel3 <- ifelse(eb$rgroup == 3, 1, 0)
eb$rel4 <- ifelse(eb$rgroup == 4, 1, 0)
## Replicate Table 2, Column 1 Regression
fit.1 <- lm(nowtot ~ ngirls + female + white + repub + age +
agesq + srvlng + srvlngsq + rel0 + rel3 + rel2
+ rel4 + demvote + as.factor(region) +
as.factor(totchi), data =eb)
length(coef(fit.1))
eb$region_1 <- ifelse(eb$region == 1, 1, 0)
eb$region_2 <- ifelse(eb$region == 2, 1, 0)
eb$region_3 <- ifelse(eb$region == 3, 1, 0)
eb$region_4 <- ifelse(eb$region == 4, 1, 0)
eb$region_5 <- ifelse(eb$region == 5, 1, 0)
eb$region_6 <- ifelse(eb$region == 6, 1, 0)
eb$region_7 <- ifelse(eb$region == 7, 1, 0)
eb$region_8 <- ifelse(eb$region == 8, 1, 0)
eb$region_9 <- ifelse(eb$region == 9, 1, 0)
eb$totchi_0 <- ifelse(eb$totchi== 0, 1, 0)
eb$totchi_1 <- ifelse(eb$totchi== 1, 1, 0)
eb$totchi_2 <- ifelse(eb$totchi== 2, 1, 0)
eb$totchi_3 <- ifelse(eb$totchi== 3, 1, 0)
eb$totchi_4 <- ifelse(eb$totchi== 4, 1, 0)
eb$totchi_5 <- ifelse(eb$totchi== 5, 1, 0)
eb$totchi_6 <- ifelse(eb$totchi== 6, 1, 0)
eb$totchi_7 <- ifelse(eb$totchi== 7, 1, 0)
eb$totchi_8 <- ifelse(eb$totchi== 8, 1, 0)
eb$totchi_9 <- ifelse(eb$totchi== 9, 1, 0)
eb$totchi_10 <- ifelse(eb$totchi== 10, 1, 0)
eb2 <- subset(eb, select = c("nowtot", "ngirls",
"female",
"white",
"repub",
"age",
"agesq",
"srvlng",
"srvlngsq",
"rel0",
"rel3",
"rel2",
"rel4",
"demvote",
"region_2",
"region_3",
"region_4",
"region_5",
"region_6",
"region_7",
"region_8",
"region_9",
"totchi_1",
"totchi_2",
"totchi_3",
"totchi_4",
"totchi_5",
"totchi_6",
"totchi_7",
"totchi_8",
"totchi_9",
"totchi_10"))
## Remove Cases with Missing Data from Data Frame
eb2 <- na.omit(eb2)
## Create X and Y as matrices
X <- as.matrix(data.frame(1, eb2[, -1]))
Y <- as.matrix(eb2[,1])
head(X)
data("mtcars")
## suppose i need to create dummies for gear
table(mtcars$gear)
head(mtcars)
## collect relevant variables, leave out reference category for gear
mtcars_sub <- subset(mtcars, select=c(mpg, gear_4, gear_5, cyl, disp, hp))
mtcars$gear_3 <- ifelse(mtcars$gear == 3, 1,0)
mtcars$gear_4 <- ifelse(mtcars$gear == 4, 1,0)
mtcars$gear_5 <- ifelse(mtcars$gear == 5, 1,0)
## collect relevant variables, leave out reference category for gear
mtcars_sub <- subset(mtcars, select=c(mpg, gear_4, gear_5, cyl, disp, hp))
Y <- cbind(mtcars$mpg)
mtcars_sub <- na.omit(mtcars_sub)
X <- as.matrix(subset(mtcars, select=c(gear_4, gear_5, cyl, disp, hp)))
Bh <- solve(t(X)%*%X)%*%t(X)%*%Y
Bh
## compare
fit <- lm(mpg ~ factor(gear) + cyl + disp + hp, data=mtcars)
coef(fit)
X <- cbind(1, X)
Bh <- solve(t(X)%*%X)%*%t(X)%*%Y
Bh
dim(eb2)
head(eb2)
data("mtcars")
fit <- lm(mpg ~ factor(gear) + cyl + disp + hp, data=mtcars)
coef(fit)
fit <- lm(mpg ~gear_4 + gear_5 + cyl + disp + hp, data=mtcars)
mtcars$gear_3 <- ifelse(mtcars$gear == 3, 1,0)
mtcars$gear_4 <- ifelse(mtcars$gear == 4, 1,0)
mtcars$gear_5 <- ifelse(mtcars$gear == 5, 1,0)
fit <- lm(mpg ~gear_4 + gear_5 + cyl + disp + hp, data=mtcars)
coef(fit)
6*250
6*250*1.1 *1.50
8*250*1.1 *1.50
8*250 *1.50
8*200 *1.50
fit.1 <- lm(nowtot ~ ngirls + female + white + repub + age +
agesq + srvlng + srvlngsq + rel0 + rel3 + rel2
+ rel4 + demvote + as.factor(region) +
as.factor(totchi), data =eb)
eb_1 <- eb
eb_1$ngirls <- 1
predict(fit.1, eb_1)
mean(predict(fit.1, eb_1))
mean(predict(fit.1, eb_1), na.rm=T)
new0[, "ngirls"] <- 1
X1 <- model.matrix(fit.1)
new0 <- X1
new0[, "ngirls"] <- 1
en1 <- mean(new0 %*% Bh)
dim(new0)
new0[, "ngirls"] <- 1
en1 <- mean(new0 %*% coef(fit.1))
en1
new0[, "ngirls"] <- 1
en1 <- length(new0 %*% coef(fit.1))
en1
